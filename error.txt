gsutil iam ch \
serviceAccount:service-382430187020@cloud-cdn-fill.iam.gserviceaccount.com:objectViewer \
gs://dev-output-bucket
ERROR 1125 05:32:11.438558 retry_decorator.py] Retrying in 1.04 seconds ...
Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 455, in SetBucketIamPolicy
    return self.api_client.buckets.SetIamPolicy(apitools_request,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/third_party/storage_apitools/storage_v1_client.py", line 466, in SetIamPolicy
    return self._RunMethod(
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 737, in _RunMethod
    return self.ProcessHttpResponse(method_config, http_response, request)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 743, in ProcessHttpResponse
    self.__ProcessHttpResponse(method_config, http_response, request))
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 609, in __ProcessHttpResponse
    raise exceptions.HttpError.FromResponse(
apitools.base.py.exceptions.HttpError: HttpError accessing <https://storage.googleapis.com/storage/v1/b/dev-output-bucket/iam?alt=json>: response: <{'x-guploader-uploadid': 'ADPycduYASVJNmxD_JilIeh4Wib52luvKXHLVysSicqdie8I6P4VW0F9b3KmTS47UxyHPmCkwurjw5McCQY42k_Oytj3nA', 'content-type': 'application/json; charset=UTF-8', 'date': 'Fri, 25 Nov 2022 05:32:11 GMT', 'vary': 'Origin, X-Origin', 'cache-control': 'no-cache, no-store, max-age=0, must-revalidate', 'expires': 'Mon, 01 Jan 1990 00:00:00 GMT', 'pragma': 'no-cache', 'content-length': '400', 'server': 'UploadServer', 'status': '412'}>, content <{
  "error": {
    "code": 412,
    "message": "One or more users named in the policy do not belong to a permitted customer.",
    "errors": [
      {
        "message": "One or more users named in the policy do not belong to a permitted customer.",
        "domain": "global",
        "reason": "conditionNotMet",
        "locationType": "header",
        "location": "If-Match"
      }
    ]
  }
}
>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/retry-decorator/retry_decorator/retry_decorator.py", line 20, in f_retry
    return f(*args, **kwargs)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 486, in _PatchIamHelperInternal
    self._SetIamHelperInternal(storage_url, policy, thread_state=thread_state)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 393, in _SetIamHelperInternal
    gsutil_api.SetBucketIamPolicy(storage_url.bucket_name,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/cloud_api_delegator.py", line 239, in SetBucketIamPolicy
    return self._GetApi(provider).SetBucketIamPolicy(bucket_name, policy)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 458, in SetBucketIamPolicy
    self._TranslateExceptionAndRaise(e, bucket_name=bucket_name)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 2258, in _TranslateExceptionAndRaise
    raise translated_exception
gslib.cloud_api.PreconditionException: PreconditionException: 412 One or more users named in the policy do not belong to a permitted customer.
ERROR 1125 05:32:14.473197 retry_decorator.py] Retrying in 1.92 seconds ...
Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 455, in SetBucketIamPolicy
    return self.api_client.buckets.SetIamPolicy(apitools_request,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/third_party/storage_apitools/storage_v1_client.py", line 466, in SetIamPolicy
    return self._RunMethod(
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 737, in _RunMethod
    return self.ProcessHttpResponse(method_config, http_response, request)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 743, in ProcessHttpResponse
    self.__ProcessHttpResponse(method_config, http_response, request))
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 609, in __ProcessHttpResponse
    raise exceptions.HttpError.FromResponse(
apitools.base.py.exceptions.HttpError: HttpError accessing <https://storage.googleapis.com/storage/v1/b/dev-output-bucket/iam?alt=json>: response: <{'x-guploader-uploadid': 'ADPycduVn-E40QsqSiT9rZwiSd49LVEn04KBnYzX0TI3pECrVX0LPY24p-bhOdaM0ELEj6JGKEOyX2eePN4xsBSXGUGeA2Efogqs', 'content-type': 'application/json; charset=UTF-8', 'date': 'Fri, 25 Nov 2022 05:32:14 GMT', 'vary': 'Origin, X-Origin', 'cache-control': 'no-cache, no-store, max-age=0, must-revalidate', 'expires': 'Mon, 01 Jan 1990 00:00:00 GMT', 'pragma': 'no-cache', 'content-length': '400', 'server': 'UploadServer', 'status': '412'}>, content <{
  "error": {
    "code": 412,
    "message": "One or more users named in the policy do not belong to a permitted customer.",
    "errors": [
      {
        "message": "One or more users named in the policy do not belong to a permitted customer.",
        "domain": "global",
        "reason": "conditionNotMet",
        "locationType": "header",
        "location": "If-Match"
      }
    ]
  }
}
>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/retry-decorator/retry_decorator/retry_decorator.py", line 20, in f_retry
    return f(*args, **kwargs)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 486, in _PatchIamHelperInternal
    self._SetIamHelperInternal(storage_url, policy, thread_state=thread_state)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 393, in _SetIamHelperInternal
    gsutil_api.SetBucketIamPolicy(storage_url.bucket_name,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/cloud_api_delegator.py", line 239, in SetBucketIamPolicy
    return self._GetApi(provider).SetBucketIamPolicy(bucket_name, policy)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 458, in SetBucketIamPolicy
    self._TranslateExceptionAndRaise(e, bucket_name=bucket_name)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 2258, in _TranslateExceptionAndRaise
    raise translated_exception
gslib.cloud_api.PreconditionException: PreconditionException: 412 One or more users named in the policy do not belong to a permitted customer.
PreconditionException: 412 One or more users named in the policy do not belong to a permitted customer.
usa_prajmane@cloudshell:~ (us-gcp-ame-its-209f8-sbx-1)$ gcloud organizations list
DISPLAY_NAME: deloitte.com
ID: 259300546097
DIRECTORY_CUSTOMER_ID: C00sbusn1
usa_prajmane@cloudshell:~ (us-gcp-ame-its-209f8-sbx-1)$ gsutil iam ch serviceAccount:service-382430187020@cloud-cdn-fill.iam.gserviceaccount.com:objectViewer gs://dev-output-bucket > new.txt
ERROR 1125 05:38:51.970438 retry_decorator.py] Retrying in 0.98 seconds ...
Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 455, in SetBucketIamPolicy
    return self.api_client.buckets.SetIamPolicy(apitools_request,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/third_party/storage_apitools/storage_v1_client.py", line 466, in SetIamPolicy
    return self._RunMethod(
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 737, in _RunMethod
    return self.ProcessHttpResponse(method_config, http_response, request)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 743, in ProcessHttpResponse
    self.__ProcessHttpResponse(method_config, http_response, request))
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 609, in __ProcessHttpResponse
    raise exceptions.HttpError.FromResponse(
apitools.base.py.exceptions.HttpError: HttpError accessing <https://storage.googleapis.com/storage/v1/b/dev-output-bucket/iam?alt=json>: response: <{'x-guploader-uploadid': 'ADPycdskG5YO0TcttyP5Vc1GN_yWP3C_PN4vWdZHdUcXQGnuLrCD-OSQSiwr2Huq8XOzU7XRY9B7G_M5vwlk5aG-R2dHMbXSI1Ca', 'content-type': 'application/json; charset=UTF-8', 'date': 'Fri, 25 Nov 2022 05:38:51 GMT', 'vary': 'Origin, X-Origin', 'cache-control': 'no-cache, no-store, max-age=0, must-revalidate', 'expires': 'Mon, 01 Jan 1990 00:00:00 GMT', 'pragma': 'no-cache', 'content-length': '400', 'server': 'UploadServer', 'status': '412'}>, content <{
  "error": {
    "code": 412,
    "message": "One or more users named in the policy do not belong to a permitted customer.",
    "errors": [
      {
        "message": "One or more users named in the policy do not belong to a permitted customer.",
        "domain": "global",
        "reason": "conditionNotMet",
        "locationType": "header",
        "location": "If-Match"
      }
    ]
  }
}
>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/retry-decorator/retry_decorator/retry_decorator.py", line 20, in f_retry
    return f(*args, **kwargs)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 486, in _PatchIamHelperInternal
    self._SetIamHelperInternal(storage_url, policy, thread_state=thread_state)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 393, in _SetIamHelperInternal
    gsutil_api.SetBucketIamPolicy(storage_url.bucket_name,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/cloud_api_delegator.py", line 239, in SetBucketIamPolicy
    return self._GetApi(provider).SetBucketIamPolicy(bucket_name, policy)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 458, in SetBucketIamPolicy
    self._TranslateExceptionAndRaise(e, bucket_name=bucket_name)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 2258, in _TranslateExceptionAndRaise
    raise translated_exception
gslib.cloud_api.PreconditionException: PreconditionException: 412 One or more users named in the policy do not belong to a permitted customer.
ERROR 1125 05:38:54.975543 retry_decorator.py] Retrying in 2.17 seconds ...
Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 455, in SetBucketIamPolicy
    return self.api_client.buckets.SetIamPolicy(apitools_request,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/third_party/storage_apitools/storage_v1_client.py", line 466, in SetIamPolicy
    return self._RunMethod(
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 737, in _RunMethod
    return self.ProcessHttpResponse(method_config, http_response, request)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 743, in ProcessHttpResponse
    self.__ProcessHttpResponse(method_config, http_response, request))
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/apitools/apitools/base/py/base_api.py", line 609, in __ProcessHttpResponse
    raise exceptions.HttpError.FromResponse(
apitools.base.py.exceptions.HttpError: HttpError accessing <https://storage.googleapis.com/storage/v1/b/dev-output-bucket/iam?alt=json>: response: <{'x-guploader-uploadid': 'ADPycdsscfaD2F71NeAPM07DdqURodWIxqY-CymBZ0HPZdBIewza3Yii69A5ccFcPcDygjC6vCCT79IWt43pjhBIEGTpFhp1X7uq', 'content-type': 'application/json; charset=UTF-8', 'date': 'Fri, 25 Nov 2022 05:38:54 GMT', 'vary': 'Origin, X-Origin', 'cache-control': 'no-cache, no-store, max-age=0, must-revalidate', 'expires': 'Mon, 01 Jan 1990 00:00:00 GMT', 'pragma': 'no-cache', 'content-length': '400', 'server': 'UploadServer', 'status': '412'}>, content <{
  "error": {
    "code": 412,
    "message": "One or more users named in the policy do not belong to a permitted customer.",
    "errors": [
      {
        "message": "One or more users named in the policy do not belong to a permitted customer.",
        "domain": "global",
        "reason": "conditionNotMet",
        "locationType": "header",
        "location": "If-Match"
      }
    ]
  }
}
>

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/usr/lib/google-cloud-sdk/platform/gsutil/third_party/retry-decorator/retry_decorator/retry_decorator.py", line 20, in f_retry
    return f(*args, **kwargs)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 486, in _PatchIamHelperInternal
    self._SetIamHelperInternal(storage_url, policy, thread_state=thread_state)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/commands/iam.py", line 393, in _SetIamHelperInternal
    gsutil_api.SetBucketIamPolicy(storage_url.bucket_name,
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/cloud_api_delegator.py", line 239, in SetBucketIamPolicy
    return self._GetApi(provider).SetBucketIamPolicy(bucket_name, policy)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 458, in SetBucketIamPolicy
    self._TranslateExceptionAndRaise(e, bucket_name=bucket_name)
  File "/usr/lib/google-cloud-sdk/platform/gsutil/gslib/gcs_json_api.py", line 2258, in _TranslateExceptionAndRaise
    raise translated_exception
gslib.cloud_api.PreconditionException: PreconditionException: 412 One or more users named in the policy do not belong to a permitted customer.
PreconditionException: 412 One or more users named in the policy do not belong to a permitted customer.
